var PrismSlider=function(e,t){"use strict";function i(e){this.settings=e,this.container=e.container.element,this.slides=e.slides.slice(),this.slidesLength=this.slides.length,this.mask=e.mask,this.duration=e.duration,this.easing=e.easing,this.slidesIndex=0,this.prevSlidesIndex=0,this.indexOffset=1,this.isAnimated=!1}return i.prototype.init=function(){this.addCanvas_(),this.mask&&this.addMask_(),setTimeout(this.addSlides_.bind(this),0)},i.prototype.addCanvas_=function(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=this.settings.container.sizes.w,this.canvas.height=this.settings.container.sizes.h,this.container.appendChild(this.canvas)},i.prototype.addMask_=function(){var e=this.mask.source,t=this.renderMask_.bind(this);this.mask.source=this.loadImage_(e,t)},i.prototype.addSlides_=function(){this.slides.forEach(function(e,t){var i=0===t?this.renderSlide_.bind(this,t):null;this.slides[t]=this.loadImage_(e,i)},this)},i.prototype.loadImage_=function(e,t){var i=new Image;return i.onload=t,i.src=e,i},i.prototype.renderMask_=function(){var e=this.canvas.width/2-this.settings.container.sizes.w/2,t=this.canvas.height/2-this.settings.container.sizes.h/2,i=this.settings.container.sizes.w,s=this.settings.container.sizes.h;this.context.drawImage(this.mask.source,e,t,i,s)},i.prototype.renderSlide_=function(e,i){i=isNaN(i)||i===t?0:i;var s=this.slides[e],n=this.canvas.width*(e-i),a=0,r=this.canvas.width,l=this.canvas.height;this.mask&&(this.context.globalCompositeOperation="source-atop"),this.context.save(),this.mask&&this.applyEffects_(),this.context.drawImage(s,n,a,r,l),this.context.restore()},i.prototype.applyEffects_=function(){this.mask.effects.flip&&this.flip_(),this.mask.effects.rotate>0&&this.rotate_()},i.prototype.flip_=function(){var e=this.mask.effects.flip;"X"===e&&(this.context.translate(this.canvas.width,0),this.context.scale(-1,1)),"Y"===e&&(this.context.translate(0,this.canvas.height),this.context.scale(1,-1))},i.prototype.rotate_=function(){var e=this.mask.effects.rotate*(Math.PI/180);this.context.translate(this.canvas.width/2,this.canvas.height/2),this.context.rotate(e),this.context.translate(-this.canvas.width/2,-this.canvas.height/2)},i.prototype.slideTo=function(e){if(!this.isAnimated&&e!==this.slidesIndex){this.prevSlidesIndex=this.slidesIndex,this.slidesIndex=e;var t=-1*(this.prevSlidesIndex-this.slidesIndex);this.indexOffset=t>0?t:-1*t,this.animate_()}},i.prototype.animate_=function(){var e=Date.now()+this.duration;this.isAnimated=!0,this.ticker_(e)},i.prototype.ticker_=function(t){var a,r,l,i=Date.now(),s=t-i,n=this.easing(s/this.duration)*this.indexOffset;if(this.slidesIndex>this.prevSlidesIndex)for(r=this.slidesIndex-n,a=0;a<=this.indexOffset;a++)l=this.slidesIndex-a,this.renderSlide_(l,r);else for(r=this.slidesIndex+n,a=0;a<=this.indexOffset;a++)l=this.slidesIndex+a,this.renderSlide_(l,r);return 50>s?(this.indexOffset=1,this.renderSlide_(this.slidesIndex),void(this.isAnimated=!1)):void e.requestAnimationFrame(this.ticker_.bind(this,t))},i}(window);